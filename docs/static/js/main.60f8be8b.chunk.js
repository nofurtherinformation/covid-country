(this["webpackJsonpcovid-country"]=this["webpackJsonpcovid-country"]||[]).push([[0],{126:function(e,t){},198:function(e,t,n){},204:function(e,t){},209:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var r=n(25),i=n(6),c=n.n(i),o=n(104),a=n.n(o),s=(n(198),n(9)),l=n(235),u=n(123),d=n(143),b=n(127),j=n(150),f=n(237),O=n(239),g=n(15),h=n(234),v=n(122),x=n(98),p={state_boundaries:"".concat(".","/data/state_borders.json"),county_boundaries:"".concat(".","/data/county_borders.json")},y=new u.a({color:[128,128,0],intensity:5,direction:[0,-100,-100],_shadow:!0}),C=new d.a({color:[180,220,220],intensity:3}),S=["#0D0887","#5C01A6","#9C179E","#CB4679","#ED7953","#FDB42F","#F0F921","#F0F921"],m=[0,.03,.05,.1,.15,.2,.25,1e3],E=x.d().domain(m).range(S);var F=function(){var e=function(){for(var e=["2020-02-01"],t="2020-02-01";t<"2021-01-18";){t=v(t,"YYYY-MM-DD").add(1,"day").format().slice(0,10),e.push(t)}return e}(),t=Object(i.useState)({latitude:0,longitude:0,zoom:4.6,pitch:40,bearing:0}),n=Object(s.a)(t,2),c=n[0],o=(n[1],Object(i.useState)((function(){var e=new b.a({dirLight:y,ambientLight:C});return e.shadowColor=[0,0,0,.15],[e]}))),a=Object(s.a)(o,1)[0],u=Object(i.useState)(null),d=Object(s.a)(u,2),F=(d[0],d[1],Object(i.useState)([])),k=Object(s.a)(F,2),_=k[0],D=k[1],w=Object(i.useState)(800),M=Object(s.a)(w,2),T=M[0],L=M[1],P=Object(i.useState)(["2020-02-01"]),R=Object(s.a)(P,2),Y=R[0],I=R[1],A=function(e,t){var n=Object(i.useRef)(),r=Object(i.useRef)(null),c=Object(i.useState)(t),o=Object(s.a)(c,2),a=o[0],l=o[1],u=Object(i.useCallback)((function(){return l((function(e){return null===e?t:null}))}),[t]),d=Object(i.useCallback)((function(){return clearInterval(r.current)}),[]);return Object(i.useEffect)((function(){n.current=e}),[e]),Object(i.useEffect)((function(){function e(){n.current()}return r.current&&d(),null!==a&&(r.current=setInterval(e,a)),d}),[a,d]),[u,!!a]}((function(){I((function(e){if(e<"2021-01-18"){var t=v(e,"YYYY-MM-DD");return(t=t.add(1,"day")).format().slice(0,10)}return e}))}),1e3-T),B=Object(s.a)(A,2),W=B[0],U=B[1];Object(i.useEffect)((function(){document.addEventListener("contextmenu",(function(e){return e.preventDefault()})),x.c("".concat(".","/data/centroids_testing_albers.csv"),x.a).then((function(e){D(e)}))}),[]);var J=[new j.a({coordinateSystem:g.a.METER_OFFSETS,id:"background",data:[[[-4e5,24e4],[44e4,24e4],[44e4,-24e4],[-4e5,-24e4]]],opacity:1,getPolygon:function(e){return e},stroked:!1,filled:!0,getFillColor:[15,15,15]}),new f.a({id:"county-layer",coordinateSystem:g.a.METER_OFFSETS,data:p.county_boundaries,getPolygon:function(e){return e},stroked:!0,filled:!1,lineWidthMinPixels:1,getLineColor:[240,240,240,10],getLineWidth:1}),new f.a({id:"polygon-layer",coordinateSystem:g.a.METER_OFFSETS,data:p.state_boundaries,getPolygon:function(e){return e},stroked:!0,filled:!1,lineWidthMinPixels:1,getLineColor:[240,240,240,25],getLineWidth:1}),new O.a({id:"line-layer",coordinateSystem:g.a.METER_OFFSETS,data:_,diskResolution:6,radius:5e3,material:!1,extruded:!0,pickable:!0,elevationScale:5e3,getPosition:function(e){return[e.x,e.y]},getFillColor:function(e){return function(e){var t=x.b(E(e));return null===t?[240,240,240]:[t.r,t.g,t.b,150]}(e["pos_".concat(Y)])},getLineColor:[0,0,0],getElevation:function(e){return[250*e["pos_".concat(Y)]]},updateTriggers:{getFillColor:Y,getElevation:Y},transitions:{getFillColor:1e3-T,getElevation:1e3-T}})],V=function(){};return Object(r.jsxs)("div",{id:"mapContainer",children:[Object(r.jsxs)("div",{id:"buttons",children:[Object(r.jsx)("button",{onClick:function(){return I("2020-02-01")},children:"Reset"}),Object(r.jsx)("button",{onClick:W,children:U?"Pause":"Resume"}),Object(r.jsx)("p",{id:"playback-slider",children:"Playback Speed"}),Object(r.jsx)(h.a,{value:T,onMouseDown:U?W:V,onChange:function(e,t){L(t)},min:0,max:900,step:25,"aria-labelledby":"playback-slider"}),Object(r.jsx)("p",{id:"date-slider",children:"Date Select"}),Object(r.jsx)(h.a,{value:e.indexOf(Y),onMouseDown:U?W:V,onChange:function(t,n){I(e[n])},min:0,max:e.length-1,step:1,"aria-labelledby":"date-slider"})]}),Object(r.jsxs)("div",{id:"title",children:[Object(r.jsx)("h1",{children:"COVID Testing Positivity Rates"}),Object(r.jsxs)("h2",{children:["7-Day Rolling Average of ",Y]})]}),Object(r.jsx)("div",{id:"logo",children:Object(r.jsx)("a",{href:"https://theuscovidatlas.org/",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)("img",{src:"".concat(".","/logo.svg"),alt:"US Covid Atlas Logo"})})}),Object(r.jsxs)("div",{id:"attribution",children:[Object(r.jsx)("a",{href:"https://theuscovidatlas.org/",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)("p",{children:"Learn more at USCovidAtlas.org"})}),Object(r.jsx)("p",{children:"Testing data from CDC. State and County boundaries from US Census."})]}),Object(r.jsxs)("div",{id:"scale",children:[Object(r.jsx)("div",{id:"breaks",children:m.slice(1,-1).reverse().map((function(e,t){return Object(r.jsxs)("p",{children:[0===t?">":"",parseInt(100*e),"%"]})}))}),Object(r.jsx)("div",{id:"colors",children:S.slice(0,-1).reverse().map((function(e){return Object(r.jsx)("span",{style:{backgroundColor:e}})}))})]}),Object(r.jsx)(l.a,{layers:J,initialViewState:c,effects:a,controller:!0})]})};n(209);var k=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(F,{})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,241)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),c(e),o(e)}))};a.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(k,{})}),document.getElementById("root")),_()}},[[210,1,2]]]);
//# sourceMappingURL=main.60f8be8b.chunk.js.map